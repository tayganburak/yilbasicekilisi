<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>CodePen - A Pen by taygan</title>
    

  </head>
    
  <body>
  <!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YÄ±lbaÅŸÄ± Ã‡ekiliÅŸi</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f2f2f2; margin:0; padding:40px; display:flex; justify-content:center; }
    .card { background:white; width:100%; max-width:520px; padding:22px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); text-align:center; }
    h1 { color:#d62828; margin:0 0 8px 0; }
    p.small { color:#555; font-size:0.95rem; margin:0 0 12px 0; }
    select, button { width:100%; padding:12px 14px; font-size:16px; border-radius:8px; border:1px solid #ddd; box-sizing:border-box; }
    button.primary { background:#40916c; color:#fff; border:none; cursor:pointer; }
    button.ghost { background:transparent; border:1px solid #ccc; cursor:pointer; }
    #result { margin-top:18px; font-size:1.1rem; font-weight:600; color:#1d3557; min-height:56px; display:flex; align-items:center; justify-content:center; }
    .controls { display:flex; gap:10px; margin-top:14px; }
    .hidden { display:none; }
    #adminBtn { margin-top:14px; background:#fff; border:1px solid #bbb; padding:10px; border-radius:8px; cursor:pointer; }
    /* Admin panel */
    #adminPanel {
      margin-top: 20px;
      padding: 14px;
      border-radius: 10px;
      background: #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.06);
      display: none;
      text-align:left;
    }
    #adminPanel h2 { margin:0 0 10px 0; font-size:18px; color:#333; }
    .item { padding:8px 6px; border-bottom:1px solid #f0f0f0; }
    .admin-controls { display:flex; gap:8px; margin-top:10px; }
    @media (max-width:480px){ body{padding:20px} .card{padding:16px} }
  </style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <h1>YÄ±lbaÅŸÄ± Ã‡ekiliÅŸi</h1>
    <p class="small">Ä°smini seÃ§ip onayla. Sonucu gÃ¶rÃ¼ntÃ¼le. </p>

    <!-- Selection area -->
    <div id="selectArea">
      <label for="userSelect" class="small" style="display:block;text-align:left;margin-bottom:8px">Ä°smini seÃ§</label>
      <select id="userSelect" aria-label="Ä°sminizi seÃ§in">
        <option value="">-- Ä°smini seÃ§ --</option>
        <option>Damla Aksu</option>
        <option>BarÄ±ÅŸ Ã–zatav</option>
        <option>Burak KasÄ±rga</option>
        <option>Burak Taygan</option>
        <option>BÃ¼ÅŸra TuÄŸmen</option>
        <option>Hakan Ã‡Ä±rpanlÄ±</option>
        <option>Semih Acar</option>
        <option>Okan DoÄŸan</option>
        <option>DoÄŸan KoÃ§</option>
        <option>Åeyda Gencer</option>
        <option>Fuatcan GÃ¶ral</option>
        <option>RÃ¼stem Ã–ztÃ¼rk</option>
        <option>Ã–zge Ã‡amdeviren</option>
        <option>Gizem Demirer</option>
        <option>Erkan Ã‡am</option>
        <option>NeÅŸe Tek</option>
        <option>BaÅŸak Narsap</option>
        <option>Umut YalÃ§Ä±nkaya</option>
        <option>Fatih Duman</option>
      </select>
      <div style="height:12px"></div>
      <button id="confirmBtn" class="primary" aria-controls="confirmArea">SeÃ§imi Onayla</button>
    </div>

    <!-- Confirm area -->
    <div id="confirmArea" class="hidden" aria-hidden="true">
      <p class="small">SeÃ§imin:</p>
      <div id="chosenName" style="font-size:1.25rem;font-weight:700;margin-top:8px;"></div>

      <div class="controls" style="margin-top:12px">
        <button id="backBtn" class="ghost">Geri DÃ¶n</button>
        <button id="revealBtn" class="primary">Sonucu GÃ¶ster</button>
      </div>
    </div>

    <!-- Result -->
    <div id="result" aria-atomic="true"></div>

    <!-- Admin button (gÃ¶rÃ¼nÃ¼r) -->
    <button id="adminBtn" aria-haspopup="true">Admin</button>

    <!-- Admin panel (ÅŸifrelenmiÅŸ aÃ§Ä±lÄ±r) -->
    <div id="adminPanel" role="region" aria-hidden="true">
      <h2>TÃ¼m EÅŸleÅŸmeler</h2>
      <div id="adminList"></div>
      <div class="admin-controls">
        <button id="resetAdminBtn" class="ghost">SÄ±fÄ±rla</button>
        <button id="closeAdminBtn" class="ghost">Kapat</button>
      </div>
    </div>
  </div>

<script>
(function(){
  // Ä°sim listesi (kaynak dosyana uygun ÅŸekilde)
  const NAMES = [
    "Damla","BarÄ±ÅŸ","Burak KasÄ±rga","Burak Taygan","BÃ¼ÅŸra","Hakan","Semih",
    "Okan","DoÄŸan","Åeyda","Fuat","RÃ¼stem","Ã–zge","Gizem","Erkan",
    "NeÅŸe","BaÅŸak","Umut","Fatih"
  ];

  // LocalStorage anahtarlarÄ±
  const USED_KEY = 'yilbasi_usedMatches_v1';
  const LOCK_KEY = 'yilbasi_lockedUser_v1';

  // Admin ÅŸifresi
  const ADMIN_PASSWORD = "258963";

  // DOM elemanlarÄ±
  const userSelect = document.getElementById('userSelect');
  const confirmBtn = document.getElementById('confirmBtn');
  const confirmArea = document.getElementById('confirmArea');
  const selectArea = document.getElementById('selectArea');
  const chosenName = document.getElementById('chosenName');
  const backBtn = document.getElementById('backBtn');
  const revealBtn = document.getElementById('revealBtn');
  const resultDiv = document.getElementById('result');

  const adminBtn = document.getElementById('adminBtn');
  const adminPanel = document.getElementById('adminPanel');
  const adminList = document.getElementById('adminList');
  const resetAdminBtn = document.getElementById('resetAdminBtn');
  const closeAdminBtn = document.getElementById('closeAdminBtn');

  // Durum verileri
  let used = JSON.parse(localStorage.getItem(USED_KEY) || '{}');
  let lockedUser = localStorage.getItem(LOCK_KEY) || null;
  let adminAuth = false; // sayfa oturumu boyunca admin doÄŸrulamasÄ±

  // Admin paneli gÃ¼ncelle
  function updateAdminPanel(){
    adminList.innerHTML = "";
    const entries = Object.entries(used);
    if (entries.length === 0){
      const p = document.createElement('div');
      p.className = "item";
      p.textContent = "HenÃ¼z eÅŸleÅŸme yok.";
      adminList.appendChild(p);
      return;
    }
    // alfabetik sÄ±rayla gÃ¶ster (isteÄŸe baÄŸlÄ±)
    entries.sort((a,b)=> a[0].localeCompare(b[0],'tr'));
    for (const [giver, receiver] of entries){
      const div = document.createElement("div");
      div.className = "item";
      div.textContent = `${giver} â†’ ${receiver}`;
      adminList.appendChild(div);
    }
  }

  // Cihaz kilidini uygula (eÄŸer varsa)
  function enforceLockIfNeeded(){
    if (lockedUser){
      selectArea.classList.add('hidden');
      confirmArea.classList.add('hidden');
      resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`;
    } else {
      // SeÃ§im ekranÄ±nÄ± gÃ¶rÃ¼nÃ¼r kÄ±l
      selectArea.classList.remove('hidden');
      resultDiv.innerHTML = '';
    }
  }
  enforceLockIfNeeded();
  updateAdminPanel();

  // SeÃ§imi onayla
  confirmBtn.addEventListener('click', ()=>{
    const user = userSelect.value;
    if (!user) { resultDiv.innerHTML = 'LÃ¼tfen Ã¶nce bir isim seÃ§in.'; return; }
    if (lockedUser && lockedUser !== user) {
      resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`; return;
    }
    chosenName.textContent = user;
    selectArea.classList.add('hidden');
    confirmArea.classList.remove('hidden');
    resultDiv.innerHTML = '';
  });

  // Geri dÃ¶n
  backBtn.addEventListener('click', ()=>{
    if (lockedUser) { resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`; return; }
    userSelect.value = '';
    confirmArea.classList.add('hidden');
    selectArea.classList.remove('hidden');
    resultDiv.innerHTML = '';
  });

  // Sonucu gÃ¶ster
  revealBtn.addEventListener('click', ()=>{
    const user = chosenName.textContent;
    if (!user) { resultDiv.innerHTML = 'Hata: isim bulunamadÄ±.'; return; }

    // EÄŸer daha Ã¶nce atanmÄ±ÅŸsa sadece gÃ¶ster ve kilitle
    if (used[user]) {
      localStorage.setItem(LOCK_KEY, user);
      lockedUser = user;
      resultDiv.innerHTML = `Sonucun daha Ã¶nce oluÅŸturulmuÅŸ:<br><br>ğŸ ${used[user]} ğŸ`;
      selectArea.classList.add('hidden');
      confirmArea.classList.add('hidden');
      updateAdminPanel();
      return;
    }

    // MÃ¼sait olanlar: kendisi hariÃ§ ve daha Ã¶nce Ã§Ä±kmamÄ±ÅŸlar
    const taken = Object.values(used);
    const available = NAMES.filter(n => n !== user && !taken.includes(n));
    if (available.length === 0) {
      resultDiv.innerHTML = 'EÅŸleÅŸme kalmadÄ±.';
      return;
    }

    const selected = available[Math.floor(Math.random()*available.length)];
    used[user] = selected;
    localStorage.setItem(USED_KEY, JSON.stringify(used));

    // Kilitle cihazÄ± bu kullanÄ±cÄ± iÃ§in
    localStorage.setItem(LOCK_KEY, user);
    lockedUser = user;

    resultDiv.innerHTML = `Bu yÄ±l hediye alacaÄŸÄ±n kiÅŸi:<br><br>ğŸ ${selected} ğŸ`;
    selectArea.classList.add('hidden');
    confirmArea.classList.add('hidden');

    updateAdminPanel();
  });

  // Admin butonuna tÄ±kla -> ÅŸifre sor
  adminBtn.addEventListener('click', ()=>{
    const pwd = prompt("Admin ÅŸifresi:");
    if (pwd === null) return;
    if (pwd === ADMIN_PASSWORD){
      adminAuth = true;
      adminPanel.style.display = "block";
      adminPanel.setAttribute('aria-hidden','false');
      updateAdminPanel();
      // scroll admin panel'e
      adminPanel.scrollIntoView({behavior:'smooth'});
    } else {
      alert("HatalÄ± ÅŸifre.");
    }
  });

  // Admin panel kapat
  closeAdminBtn.addEventListener('click', ()=>{
    adminPanel.style.display = "none";
    adminPanel.setAttribute('aria-hidden','true');
    adminAuth = false;
  });

  // SÄ±fÄ±rlama (admin yetkisi gerektirir)
  resetAdminBtn.addEventListener('click', ()=>{
    // ek gÃ¼venlik: tekrar ÅŸifre iste
    const pwd = prompt("SÄ±fÄ±rlama iÃ§in ÅŸifreyi tekrar girin:");
    if (pwd === null) return;
    if (pwd !== ADMIN_PASSWORD){
      alert("HatalÄ± ÅŸifre. SÄ±fÄ±rlama iptal edildi.");
      return;
    }
    if (!confirm("TÃ¼m eÅŸleÅŸmeleri tamamen sÄ±fÄ±rlamak istediÄŸine emin misin?")) return;
    localStorage.removeItem(USED_KEY);
    localStorage.removeItem(LOCK_KEY);
    used = {};
    lockedUser = null;
    adminAuth = false;
    adminPanel.style.display = "none";
    adminPanel.setAttribute('aria-hidden','true');
    userSelect.value = '';
    selectArea.classList.remove('hidden');
    confirmArea.classList.add('hidden');
    resultDiv.innerHTML = 'TÃ¼m eÅŸleÅŸmeler sÄ±fÄ±rlandÄ±.';
    updateAdminPanel();
  });

  // Accessibility: Enter ile seÃ§im onayÄ± (select iÃ§indeyken)
  userSelect.addEventListener('keydown', function(e){ if(e.key === 'Enter'){ confirmBtn.click(); } });

})();
</script>
</body>
</html>
    
  </body>
  
</html>
