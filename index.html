<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>Untitled</title>
    

  </head>
    
  <body>
  <html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YÄ±lbaÅŸÄ± Ã‡ekiliÅŸi</title>
  <style>
    body { font-family: Arial, sans-serif; background:#f2f2f2; margin:0; padding:40px; display:flex; justify-content:center; }
    .card { background:white; width:100%; max-width:420px; padding:22px; border-radius:12px; box-shadow:0 6px 18px rgba(0,0,0,0.08); text-align:center; }
    h1 { color:#d62828; margin:0 0 8px 0; }
    p.small { color:#555; font-size:0.95rem; }
    select, button { width:100%; padding:12px 14px; font-size:16px; border-radius:8px; border:1px solid #ddd; box-sizing:border-box; }
    button.primary { background:#40916c; color:#fff; border:none; }
    button.ghost { background:transparent; border:1px solid #ccc; }
    #result { margin-top:18px; font-size:1.1rem; font-weight:600; color:#1d3557; min-height:56px; display:flex; align-items:center; justify-content:center; }
    .controls { display:flex; gap:10px; margin-top:14px; }
    .hidden { display:none; }
    @media (max-width:480px){ body{padding:20px} .card{padding:16px} }
  </style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <h1>YÄ±lbaÅŸÄ± Ã‡ekiliÅŸi</h1>
    <p class="small">Ä°smini seÃ§, sonra sonucu onayla. YanlÄ±ÅŸ seÃ§tiysen <strong>Geri DÃ¶n</strong> ile tekrar seÃ§ebilirsin. Sonucu bir kez gÃ¶sterdikten sonra aynÄ± cihazda baÅŸka isim seÃ§ilemez.</p>

    <!-- Selection area -->
    <div id="selectArea">
      <label for="userSelect" class="small" style="display:block;text-align:left;margin-bottom:8px">Ä°smini seÃ§</label>
      <select id="userSelect" aria-label="Ä°sminizi seÃ§in">
        <option value="">-- Ä°smini seÃ§ --</option>
        <option>Damla</option>
        <option>BarÄ±ÅŸ</option>
        <option>Burak KasÄ±rga</option>
        <option>Burak Taygan</option>
        <option>BÃ¼ÅŸra</option>
        <option>Hakan</option>
        <option>Semih</option>
        <option>Okan</option>
        <option>DoÄŸan</option>
        <option>Åeyda</option>
        <option>Fuat</option>
        <option>RÃ¼stem</option>
        <option>Ã–zge</option>
        <option>Gizem</option>
        <option>Erkan</option>
        <option>NeÅŸe</option>
        <option>BaÅŸak</option>
        <option>Umut</option>
        <option>Fatih</option>
      </select>
      <div style="height:12px"></div>
      <button id="confirmBtn" class="primary" aria-controls="confirmArea">SeÃ§imi Onayla</button>
    </div>

    <!-- Confirm area -->
    <div id="confirmArea" class="hidden" aria-hidden="true">
      <p class="small">SeÃ§imin:</p>
      <div id="chosenName" style="font-size:1.25rem;font-weight:700;margin-top:8px;"></div>

      <div class="controls" style="margin-top:16px">
        <button id="backBtn" class="ghost">Geri DÃ¶n</button>
        <button id="revealBtn" class="primary">Sonucu GÃ¶ster</button>
      </div>
    </div>

    <!-- Result -->
    <div id="result" aria-atomic="true"></div>

    <!-- Admin -->
    <div id="admin" style="margin-top:14px">
      <button id="resetBtn" class="ghost">(Admin) TÃ¼m EÅŸleÅŸmeleri SÄ±fÄ±rla</button>
    </div>
  </div>

<script>
(function(){
  const NAMES = [
    "Damla","BarÄ±ÅŸ","Burak KasÄ±rga","Burak Taygan","BÃ¼ÅŸra","Hakan","Semih",
    "Okan","DoÄŸan","Åeyda","Fuat","RÃ¼stem","Ã–zge","Gizem","Erkan",
    "NeÅŸe","BaÅŸak","Umut","Fatih"
  ];

  const USED_KEY = 'yilbasi_usedMatches_v1';
  const LOCK_KEY = 'yilbasi_lockedUser_v1';

  const userSelect = document.getElementById('userSelect');
  const confirmBtn = document.getElementById('confirmBtn');
  const confirmArea = document.getElementById('confirmArea');
  const selectArea = document.getElementById('selectArea');
  const chosenName = document.getElementById('chosenName');
  const backBtn = document.getElementById('backBtn');
  const revealBtn = document.getElementById('revealBtn');
  const resultDiv = document.getElementById('result');
  const resetBtn = document.getElementById('resetBtn');

  let used = JSON.parse(localStorage.getItem(USED_KEY) || '{}');
  let lockedUser = localStorage.getItem(LOCK_KEY) || null;

  function enforceLockIfNeeded() {
    if (lockedUser) {
      selectArea.classList.add('hidden');
      confirmArea.classList.add('hidden');
      resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`;
    }
  }
  enforceLockIfNeeded();

  confirmBtn.addEventListener('click', ()=>{
    const user = userSelect.value;
    if (!user) { resultDiv.innerHTML = 'LÃ¼tfen Ã¶nce bir isim seÃ§in.'; return; }
    if (lockedUser && lockedUser !== user) {
      resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`; return;
    }
    chosenName.textContent = user;
    selectArea.classList.add('hidden');
    confirmArea.classList.remove('hidden');
    resultDiv.innerHTML = '';
  });

  backBtn.addEventListener('click', ()=>{
    if (lockedUser) { resultDiv.innerHTML = `Bu cihazda sonuÃ§ daha Ã¶nce <strong>${lockedUser}</strong> iÃ§in oluÅŸturuldu.`; return; }
    userSelect.value = '';
    confirmArea.classList.add('hidden');
    selectArea.classList.remove('hidden');
    resultDiv.innerHTML = '';
  });

  revealBtn.addEventListener('click', ()=>{
    const user = chosenName.textContent;
    if (!user) { resultDiv.innerHTML = 'Hata: isim bulunamadÄ±.'; return; }

    if (used[user]) {
      localStorage.setItem(LOCK_KEY,user);
      lockedUser = user;
      resultDiv.innerHTML = `Sonucun daha Ã¶nce oluÅŸturulmuÅŸ:<br><br>ğŸ ${used[user]} ğŸ`;
      selectArea.classList.add('hidden');
      confirmArea.classList.add('hidden');
      return;
    }

    const taken = Object.values(used);
    const available = NAMES.filter(n => n !== user && !taken.includes(n));

    if (available.length === 0) {
      resultDiv.innerHTML = 'EÅŸleÅŸme kalmadÄ±.';
      return;
    }

    const selected = available[Math.floor(Math.random()*available.length)];
    used[user] = selected;
    localStorage.setItem(USED_KEY, JSON.stringify(used));

    localStorage.setItem(LOCK_KEY, user);
    lockedUser = user;

    resultDiv.innerHTML = `Bu yÄ±l hediye alacaÄŸÄ±n kiÅŸi:<br><br>ğŸ ${selected} ğŸ`;
    selectArea.classList.add('hidden');
    confirmArea.classList.add('hidden');
  });

  /* --------------- ÅÄ°FRELÄ° RESET ---------------- */
  resetBtn.addEventListener('click', ()=>{
    const pwd = prompt("SÄ±fÄ±rlama iÃ§in ÅŸifreyi girin:");

    const ADMIN_PASSWORD = "258963"; // â† Åifre burada

    if (pwd === null) return;
    if (pwd !== ADMIN_PASSWORD) {
      alert("HatalÄ± ÅŸifre.");
      return;
    }

    if (!confirm('TÃ¼m eÅŸleÅŸmeleri sÄ±fÄ±rlamak istediÄŸine emin misin?')) return;

    localStorage.removeItem(USED_KEY);
    localStorage.removeItem(LOCK_KEY);
    used = {};
    lockedUser = null;
    userSelect.value = '';
    selectArea.classList.remove('hidden');
    confirmArea.classList.add('hidden');
    resultDiv.innerHTML = 'TÃ¼m eÅŸleÅŸmeler sÄ±fÄ±rlandÄ±.';
  });

})();
</script>
</body>
</html>
    
  </body>
  
</html>
